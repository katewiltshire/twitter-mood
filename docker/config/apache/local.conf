<VirtualHost *:80>
	ServerAdmin techteam@thisisdare.com
	ServerName localhost
	Redirect permanent / https://localhost/
</VirtualHost>

<VirtualHost *:443>
	ServerAdmin techteam@thisisdare.com
    ServerName localhost

	SetEnvIfNoCase X-FORWARDED-PROTO "^https$" HTTPS
    WSGIDaemonProcess localhost python-path=/var/www/app/src/djangoprj
    WSGIProcessGroup localhost

    Alias /robots.txt /var/www/app/src/djangoprj/public/robots.txt
    Alias /favicon.ico /var/www/app/src/djangoprj/public/favicon.ico

    Alias /media/ /var/www/app/src/djangoprj/media/
    <Directory /var/www/app/src/djangoprj/media>
           Require all granted
    </Directory>

    Alias /public/ /var/www/app/src/djangoprj/public/
    <Directory /var/www/app/src/djangoprj/public>
        Require all granted
    </Directory>

    Alias /static/ /var/www/app/src/djangoprj/static/
    <Directory /var/www/app/src/djangoprj/static>
            Require all granted
    </Directory>

    WSGIScriptAlias / /var/www/app/src/djangoprj/djangoprj/wsgi.py process-group=localhost

    <Directory /var/www/app/src/djangoprj/djangoprj>
        <Files wsgi.py>
                Require all granted
        </Files>
    </Directory>

	ErrorLog ${APACHE_LOG_DIR}/error.log

	# Possible values include: debug, info, notice, warn, error, crit, alert, emerg.
	LogLevel warn
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	<IfModule mod_ssl.c>
        SSLEngine On
        SSLCertificateFile /var/www/app/docker/config/ssl/common.crt
        SSLCertificateKeyFile /var/www/app/docker/config/ssl/common.key
	</IfModule>
</VirtualHost>
